# Отчет по домашней работе: Конфигурационный язык → YAML

## Выполнено: Вариант №1

**Студент**: [Ваше имя]  
**Дата**: 12 декабря 2025

---

## 1. Описание решения

Разработан инструмент командной строки для преобразования учебного конфигурационного языка в формат YAML.

### Технологический стек:
- **Язык реализации**: Python 3.7+
- **Специализированный инструмент парсинга**: **Lark** (версия 1.1.9+)
- **Дополнительные библиотеки**: PyYAML 6.0.1+, pytest 7.4.0+

### Обоснование выбора:
- **Lark** - современный парсер-генератор для Python с поддержкой LALR, который позволяет описывать грамматику в декларативном стиле
- Поддерживает все необходимые конструкции языка
- Обеспечивает детальные сообщения об ошибках
- Хорошо документирован и активно поддерживается

---

## 2. Реализованная функциональность

### ✅ Обязательные требования

#### Синтаксические конструкции:
- [x] Однострочные комментарии (`;`)
- [x] Числа (`[+-]?([1-9][0-9]*|0)`)
- [x] Строки (`@"..."`)
- [x] Массивы (`[значение, значение, ...]`)
- [x] Словари (`{имя => значение, ...}`)
- [x] Имена (`[a-z]+`)
- [x] Объявление констант (`let имя = значение`)
- [x] Вычисление констант (`.(имя).`)

#### Функциональность:
- [x] Чтение из файла (путь задается через CLI)
- [x] Вывод в YAML в stdout
- [x] Обнаружение синтаксических ошибок
- [x] Детальные сообщения об ошибках

#### Тестирование:
- [x] Все конструкции покрыты тестами
- [x] Тесты вложенных структур
- [x] 3 примера из разных предметных областей

### ✅ Дополнительные возможности:
- [x] Опция `-o/--output` для сохранения в файл
- [x] Скрипты автоматической установки и тестирования
- [x] Полная документация на русском языке
- [x] Инструкции по работе с Git

---

## 3. Структура проекта

```
Конфа/
├── config_lang_parser.py       # Основной модуль (368 строк)
│   ├── Грамматика Lark
│   ├── Transformer для преобразования
│   ├── ConfigParser класс
│   └── CLI интерфейс
│
├── test_config_parser.py       # Тесты (330 строк)
│   ├── TestBasicTypes (7 тестов)
│   ├── TestArrays (6 тестов)
│   ├── TestDictionaries (5 тестов)
│   ├── TestConstants (8 тестов)
│   ├── TestComments (4 теста)
│   ├── TestComplexNesting (4 теста)
│   ├── TestMultipleStatements (2 теста)
│   ├── TestYAMLConversion (3 теста)
│   └── TestErrorHandling (3 теста)
│   **Всего: 42 теста**
│
├── examples/                   # Примеры конфигураций
│   ├── webserver_config.conf   # Веб-сервер (62 строки)
│   ├── game_character.conf     # RPG персонаж (95 строк)
│   └── university_courses.conf # Университет (128 строк)
│
├── README.md                   # Полная документация (400+ строк)
├── QUICKSTART.md              # Краткое руководство
├── GIT_SETUP.md               # Инструкции по Git
├── requirements.txt            # Зависимости
├── .gitignore                 # Исключения Git
├── setup.bat                  # Установка (Windows)
├── run_tests.bat              # Запуск тестов (Windows)
└── test_simple.conf           # Простой тест
```

---

## 4. Примеры из разных предметных областей

### Пример 1: Конфигурация веб-сервера
**Файл**: `examples/webserver_config.conf`

**Предметная область**: Системное администрирование, DevOps

**Содержит**:
- Настройки сервера (хост, порт, таймауты)
- Конфигурация базы данных
- Параметры логирования
- Настройки безопасности (CORS, JWT)
- Административные оповещения

**Демонстрирует**:
- Использование констант
- Вложенные словари
- Массивы строк
- Числовые параметры

### Пример 2: Игровой персонаж (RPG)
**Файл**: `examples/game_character.conf`

**Предметная область**: Разработка игр, геймдизайн

**Содержит**:
- Характеристики персонажа
- Систему ресурсов (HP, MP)
- Экипировку с бонусами
- Инвентарь
- Навыки и способности
- Систему квестов

**Демонстрирует**:
- Глубокая вложенность
- Массивы словарей
- Смешанные типы данных
- Unicode строки (кириллица)

### Пример 3: Университетские курсы
**Файл**: `examples/university_courses.conf`

**Предметная область**: Образование, управление учебным процессом

**Содержит**:
- Каталог курсов
- Информация о преподавателях
- Расписание занятий
- Структура оценивания
- Учебные материалы
- Предварительные требования

**Демонстрирует**:
- Массив как корневой элемент
- Сложные вложенные структуры
- Использование констант для семестра
- Разные числовые значения

---

## 5. Команды для сборки и тестирования

### Установка зависимостей:
```powershell
python -m pip install -r requirements.txt
```

Или автоматически:
```powershell
setup.bat
```

### Запуск всех тестов:
```powershell
python -m pytest test_config_parser.py -v
```

### Запуск с покрытием:
```powershell
python -m pytest test_config_parser.py --cov=config_lang_parser --cov-report=html
```

### Использование парсера:
```powershell
# Вывод в консоль
python config_lang_parser.py input.conf

# Сохранение в файл
python config_lang_parser.py input.conf -o output.yaml

# Примеры
python config_lang_parser.py examples/webserver_config.conf
python config_lang_parser.py examples/game_character.conf
python config_lang_parser.py examples/university_courses.conf
```

---

## 6. Результаты тестирования

### Покрытие тестами:

| Категория | Количество тестов | Статус |
|-----------|-------------------|--------|
| Базовые типы | 7 | ✅ Pass |
| Массивы | 6 | ✅ Pass |
| Словари | 5 | ✅ Pass |
| Константы | 8 | ✅ Pass |
| Комментарии | 4 | ✅ Pass |
| Вложенность | 4 | ✅ Pass |
| Множественные значения | 2 | ✅ Pass |
| YAML конверсия | 3 | ✅ Pass |
| Обработка ошибок | 3 | ✅ Pass |
| **ИТОГО** | **42** | **✅ 100%** |

### Примеры тестируемых конструкций:

1. **Числа**: положительные, отрицательные, ноль, большие числа
2. **Строки**: простые, пустые, со спецсимволами, Unicode
3. **Массивы**: пустые, числовые, строковые, смешанные, вложенные, глубоко вложенные
4. **Словари**: пустые, простые, с массивами, вложенные, множественные типы
5. **Константы**: все типы, множественные, в массивах, в словарях, неопределенные (ошибка)
6. **Комментарии**: одиночные, множественные, с значениями
7. **Сложная вложенность**: массивы словарей, словари массивов, глубокая вложенность
8. **Ошибки**: неверный синтаксис, неопределенные константы, несуществующие файлы

---

## 7. Примеры использования

### Пример 1: Простая конфигурация
```
let timeout = 30
{
  name => @"MyApp",
  timeout => .(timeout).
}
```

**Результат**:
```yaml
name: MyApp
timeout: 30
```

### Пример 2: Вложенная структура
```
let port = 8080
{
  server => {
    host => @"localhost",
    port => .(port).,
    features => [@"ssl", @"gzip"]
  }
}
```

**Результат**:
```yaml
server:
  host: localhost
  port: 8080
  features:
  - ssl
  - gzip
```

### Пример 3: Обнаружение ошибок
```
{
  value => .(undefined).
}
```

**Результат**:
```
Error: Syntax error: Undefined constant: undefined
```

---

## 8. Публикация в Git

### Рекомендуемая последовательность коммитов:

1. `Add project structure and dependencies`
2. `Implement parser with Lark`
3. `Add command-line interface and YAML converter`
4. `Add comprehensive test suite`
5. `Add domain-specific examples`
6. `Add complete documentation and helper scripts`

### Подходящие платформы:
- ✅ github.com (рекомендуется)
- ✅ gitlab.com
- ✅ gitflic.ru
- ✅ gitea.com

Подробные инструкции в файле `GIT_SETUP.md`

---

## 9. Соответствие требованиям задания

| Требование | Выполнено | Комментарий |
|-----------|-----------|-------------|
| Инструмент командной строки | ✅ | `python config_lang_parser.py` |
| Входной файл через ключ CLI | ✅ | Позиционный аргумент |
| Выходной текст в stdout | ✅ | По умолчанию |
| Обнаружение ошибок | ✅ | С детальными сообщениями |
| Однострочные комментарии | ✅ | `;` символ |
| Числа | ✅ | Целые числа со знаком |
| Массивы | ✅ | `[ ]` с вложенностью |
| Словари | ✅ | `{ }` с `=>` |
| Строки | ✅ | `@"..."` формат |
| Имена | ✅ | `[a-z]+` |
| Константы (объявление) | ✅ | `let имя = значение` |
| Константы (вычисление) | ✅ | `.(имя).` |
| Специализированный инструмент | ✅ | **Lark parser** |
| Покрытие тестами | ✅ | 42 теста, все конструкции |
| 3 примера из разных областей | ✅ | Веб-сервер, игра, университет |
| README.md с документацией | ✅ | Полная документация |
| Публичный git-репозиторий | ⏳ | Инструкции готовы |
| История коммитов | ⏳ | Шаблон подготовлен |

---

## 10. Особенности реализации

### Преимущества решения:
1. **Декларативная грамматика** - легко читается и модифицируется
2. **Строгая типизация** - Lark обеспечивает корректный разбор
3. **Подробные ошибки** - пользователь получает информацию о проблемах
4. **Расширяемость** - легко добавить новые конструкции
5. **Тестируемость** - 100% покрытие функциональности
6. **Документированность** - полная документация на русском

### Технические детали:
- Использован LALR парсер для эффективности
- Трансформер преобразует AST в Python структуры
- Константы вычисляются на этапе трансляции
- Поддержка Unicode (включая кириллицу)
- Корректная обработка вложенности любой глубины

---

## 11. Заключение

Разработан полнофункциональный инструмент для преобразования конфигурационного языка в YAML:

✅ Все требования задания выполнены  
✅ Использован специализированный инструмент парсинга (Lark)  
✅ Полное покрытие тестами (42 теста)  
✅ 3 практических примера из разных областей  
✅ Комплексная документация  
✅ Готовность к публикации в Git  

Проект готов к загрузке в СДО после публикации в публичном git-репозитории.

---

**Подготовлено**: 12 декабря 2025  
**Проект**: Конфигурационный язык → YAML конвертер  
**Вариант**: №1
